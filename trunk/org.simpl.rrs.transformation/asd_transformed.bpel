<?xml version="1.0" encoding="UTF-8"?>
<!-- asd BPEL Process [Generated by the Eclipse BPEL Designer]  -->
<!-- Date: Mon Mar 01 15:01:32 CET 2010 -->
<bpel:process xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:tns="asd" xmlns:rrsWSDL="simpl" xmlns:rrs="http://uni-stuttgart.de/simpl/rrs" name="asd" targetNamespace="asd" suppressJoinFailure="yes">
  <!-- Import the client WSDL -->
  <bpel:import location="rrs.xsd" namespace="http://uni-stuttgart.de/simpl/rrs" importType="http://www.w3.org/2001/XMLSchema" />
  <bpel:import location="asdArtifacts.wsdl" namespace="asd" importType="http://schemas.xmlsoap.org/wsdl/" />
  <!-- ================================================================= -->
  <!-- PARTNERLINKS                                                      -->
  <!-- List of services participating in this BPEL process               -->
  <!-- ================================================================= -->
  <bpel:partnerLinks>
    <!--
        The 'client' role represents the requester of this service. It is 
        used for callback. The location and correlation information associated
        with the client role are automatically set using WS-Addressing.
        -->
    <bpel:partnerLink name="client" partnerLinkType="tns:asd" myRole="asdProvider" partnerRole="asdRequester" />
    <bpel:partnerLink name="RRS" partnerLinkType="tns:RRSGetType" myRole="GET" />
  </bpel:partnerLinks>
  <!-- ================================================================= -->
  <!-- VARIABLES                                                         -->
  <!-- List of messages and XML documents used within this BPEL process  -->
  <!-- ================================================================= -->
  <bpel:variables>
    <!-- Reference to the message passed as input during initiation -->
    <bpel:variable name="input" messageType="tns:asdRequestMessage" />
    <!-- Reference to the message that will be sent back to the 
             requester during callback
             -->
    <bpel:variable name="output" messageType="tns:asdResponseMessage" />
    <bpel:variable name="data" type="simpl:DataManagementActivityType" />
    <bpel:variable name="dataEPR" type="rrs:EPR" />
    <bpel:variable name="asd" type="ns1:byte" />
    <bpel:variable name="asdEPR" type="rrs:EPR" />
    <bpel:variable name="ReferenceVariable" type="ns1:decimal" />
    <bpel:variable name="ReferenceVariableEPR" type="rrs:EPR" />
  </bpel:variables>
  <!-- ================================================================= -->
  <!-- ORCHESTRATION LOGIC                                               -->
  <!-- Set of activities coordinating the flow of messages across the    -->
  <!-- services integrated within this business process                  -->
  <!-- ================================================================= -->
  <bpel:sequence name="main">
    <!-- Receive input from requestor. 
             Note: This maps to operation defined in asd.wsdl 
             -->
    <bpel:receive name="receiveInput" partnerLink="client" portType="tns:asd" operation="initiate" variable="dataEPR" createInstance="yes" />
    <bpel:sequence name="prepare">
      <bpel:invoke name="asdRefresh_0" partnerLink="RRS" operation="get" portType="rrsWSDL:RRSRetrievalService" inputVariable="asdEPR" outputVariable="asd" />
    </bpel:sequence>
    <!-- Asynchronous callback to the requester.
             Note: the callback location and correlation id is transparently handled 
             using WS-addressing.
             -->
    <bpel:invoke name="Invoke" partnerLink="client" operation="onResult" portType="tns:asdCallback" inputVariable="ReferenceVariableEPR" outputVariable="dataEPR" />
    <bpel:reply name="Reply" partnerLink="client" operation="initiate" portType="tns:asd" variable="dataEPR" />
    <bpel:reply name="Reply" partnerLink="client" operation="initiate" portType="tns:asd" variable="ReferenceVariableEPR" />
    <bpel:reply name="Reply" partnerLink="client" operation="initiate" portType="tns:asd" variable="asdEPR" />
    <bpel:invoke name="dataRefresh_0" partnerLink="RRS" operation="get" portType="rrsWSDL:RRSRetrievalService" inputVariable="dataEPR" outputVariable="data" />
    <bpel:assign validate="no" name="Assign">
      <bpel:copy>
        <bpel:from variable="data" />
        <bpel:to variable="input" />
      </bpel:copy>
    </bpel:assign>
    <bpel:assign validate="no" name="Assign">
      <bpel:copy>
        <bpel:from><![CDATA[val($asd)]]></bpel:from>
        <bpel:to variable="input" />
      </bpel:copy>
    </bpel:assign>
    <bpel:invoke name="callbackClient" partnerLink="client" portType="tns:asdCallback" operation="onResult" inputVariable="ReferenceVariableEPR" />
  </bpel:sequence>
</bpel:process>

